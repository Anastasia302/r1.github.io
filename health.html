<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
  <title>–ó–¥–æ—Ä–æ–≤—å–µ ‚Äî –£–§–ù–° –†–æ—Å—Å–∏–∏</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,600,700&display=swap">
  <style>
    :root {
      --ufns-corner: 40px;
      --ufns-corner-mobile: 24px;
      --ufns-btn-size: 40px;
    }
    html { min-height: 100vh; box-sizing: border-box; max-width: 100vw; overflow-x: hidden !important;}
    body {
      margin: 0; padding: 0;
      max-width: 100vw;
      font-family: 'Montserrat', Arial, sans-serif;
      background-color: #f9f9f9;
      font-size: 1rem;
      width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition:padding-right .24s;
    }
    header {
      background: transparent;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 70px;
      z-index: 1000;
      box-sizing: border-box;
    }
    .menu-icon {
      position: absolute;
      left: var(--ufns-corner);
      top: 50%;
      transform: translateY(-50%);
      z-index: 1101;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: var(--ufns-btn-size);
      height: var(--ufns-btn-size);
      background-color: #007BFF;
      border-radius: 50%;
      margin: 0;
      cursor: pointer;
      user-select: none;
      box-sizing: border-box;
      flex-shrink: 0;
      transition: left .18s;
    }
    .menu-icon .bar {
      width: 22px;
      height: 3.5px;
      background-color: white;
      margin: 2.5px 0;
      border-radius:1.5px;
      display: block;
    }
    .title-container {
      flex: 1 1 0%;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      pointer-events: none;
      width: 100%;
      position: relative;
    }
    .title {
      background-color: #007BFF;
      color: white;
      padding: 0 22px;
      display: flex;
      align-items: center;
      height: 46px;
      border-radius: 50px;
      font-size: 1.29rem;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: none;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(0,0,0,0.09);
      margin: 0 auto;
      pointer-events: all;
    }
    @media (max-width: 900px) {
      .title-container { width: 100%; justify-content: center;}
    }
    @media (max-width: 600px) {
      header { height: 53px;}
      .menu-icon, .title { height: 35px; min-height: 35px; font-size: 1.08rem;}
      .title { padding: 0 11px;}
      .menu-icon {
        width: var(--ufns-btn-size);
        height: var(--ufns-btn-size);
        left: var(--ufns-corner-mobile);
      }
    }
    .sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100vh;
      background-color: white;
      border-right: 1px solid #ccc;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
      transition: left 0.3s ease, opacity 0.3s;
      z-index: 1100;
      box-sizing: border-box;
      overflow-y: auto;
      opacity: 0;
      pointer-events: none;
    }
    .sidebar.open {
      left: 0;
      opacity: 1;
      pointer-events: auto;
    }
    @media (max-width: 700px) {
      .sidebar {
        width: 50vw;
        left: -50vw;
        max-width: 100vw;
        min-width: 140px;
      }
      .sidebar.open {
        left: 0;
      }
    }
    .sidebar button {
      display: block;
      width: 100%;
      padding: 15px;
      border: none;
      background: none;
      font-size: 1.13rem;
      text-align: left;
      cursor: pointer;
      color: #333;
      box-sizing: border-box;
      user-select: none;
      transition: background 0.13s;
    }
    .sidebar button.active, .sidebar button:hover {
      background-color: #e1f0fc;
    }
    #page-wrapper {
      width: 100%;
      max-width: 900px;
      margin-top: 70px;
      padding: 0 10px 50px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 80vh;
    }
    .health-block {
      background: #fff;
      padding: 27px 10px 28px 10px;
      border-radius: 14px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.09);
      width: 100%;
      max-width: 600px;
      margin: 8px auto 0 auto;
      min-width: 0;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .health-title {
      font-size: 1.18rem;
      font-weight: 700;
      color: #007BFF;
      margin: 0 auto 14px;
      letter-spacing: 0.4px;
      text-align: center;
      width: 100%;
    }
    .tips-list {
      margin: 3px 0 26px 0;
      padding: 0;
      list-style: none;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 13px;
    }
    .tip-card {
      background: linear-gradient(97deg,#f4faff 20%, #ecfaff 120%);
      border: 2px solid #e9f3fd;
      border-radius: 15px;
      box-shadow: 0 2px 8px #007bff0d;
      padding: 14px 15px 13px 15px;
      word-break: break-word;
      position: relative;
      transition: box-shadow .15s, border .15s, background .11s;
      outline:none;
      user-select: none;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-items: flex-start;
      text-align: justify;
    }
    .tip-head {
      color: #2175d7;
      font-weight: 700;
      font-size: 1.07em;
      margin-bottom: .25em;
      margin-right: 10px;
    }
    .btn-trigger {
      background: none;
      border: 2px solid #007BFF;
      color: #007BFF;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      margin-left: auto;
      transition: background .15s, color .15s;
    }
    .btn-trigger:hover {
      background: #007BFF;
      color: white;
    }
    .mini-indicator {
      position: absolute;
      top: 16px;
      right: 19px;
      padding: 1px 11px 0 11px;
      border-radius:13px;
      font-weight: 700;
      font-size: .90em;
      opacity: .91;
      pointer-events:none;
      user-select:none;
      box-shadow: 0 2px 8px #87cfff42;
      white-space: nowrap;
      max-width:80%;
      text-align:center;
    }
    .mini-indicator             { background: #e0ffe7; color: #0a8906; }
    .mini-indicator.done        { background: #e7f3fe !important; color: #2196F3 !important; }
    .mini-indicator.eaten       { background: #fff6d0 !important; color: #a17917 !important; }
    .mini-indicator.posture     { background: #e8dfff !important; color: #713bc7 !important;}
    .mini-indicator.health      { background: #e6e6e6 !important; color: #444 !important;}
    .mini-indicator.checkup     { background: #e7f3fe !important; color: #1976d2 !important; }
    @media (hover:hover) and (pointer:fine){
      .tip-card:hover {border-color: #2196f3;}
    }
    @media (max-width:600px){
      .tip-card {
        flex-direction: column;
        align-items: flex-start;
        padding-bottom: 26px;
      }
      .tip-card .mini-indicator {
        position: static;
        margin-left: 0;
        margin-top: 8px;
        margin-bottom: 0;
        display: inline-block;
        width: max-content;
        max-width:100%;
        top: auto; right: auto;
        transform: none !important;
      }
    }
    .my-reminders-title {
      font-size: 1.04rem;
      color: #2175d7;
      margin: 18px auto 7px 0;
      font-weight: 700;
      width:100%;
    }
    .reminder-form {
      display: flex;
      gap: 8px;
      margin-bottom: 14px;
      width: 100%;
    }
    .reminder-form input {
      flex: 1;
      background: #f7fcfa;
      border: 1.5px solid #bbe2ff;
      border-radius: 8px;
      padding: 11px 14px;
      font-size: 1em;
      font-family: inherit;
      outline: none;
      transition: border .14s;
      box-sizing: border-box;
    }
    .reminder-form input:focus {
      border-color: #4faeff;
    }
    .reminder-btn {
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 40px;
      font-weight: 700;
      font-size: 1.07em;
      padding: 0 19px;
      cursor: pointer;
      transition: background .14s;
      outline: none;
    }
    .reminder-btn:hover, .reminder-btn:focus {
      background: #005ad7;
    }
    .reminders-list {
      width: 100%;
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 7px;
    }
    .reminder-item {
      background: #e7f3fe;
      border: 1.3px solid #b3d9fe;
      border-radius: 8px;
      padding: 9px 13px;
      color: #1976d2;
      font-size: 1em;
      display: flex;
      align-items: center;
      justify-content: space-between;
      word-break: break-word;
    }
    .reminder-remove-btn {
      background: #fff;
      color: #b43c3c;
      border: none;
      border-radius: 7px;
      font-weight: 700;
      font-size: .95em;
      padding: 4px 12px;
      cursor: pointer;
      transition: background .13s, color .13s;
      margin-left: 10px;
    }
    .reminder-remove-btn:hover {
      background: #ffdbe1;
      color: #940808;
    }
    /* -------- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ --------- */
    .modal-mask {
      position: fixed;
      background: rgba(0,0,0,0.13);
      z-index: 4000;
      left:0;top:0;right:0;bottom:0;
      display: flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      animation: modalfadein .18s;
    }
    @keyframes modalfadein{
      from{opacity:0} to{opacity:1}
    }
    .modal-window {
      background: #fff;
      border-radius: 19px;
      box-shadow: 0 2px 27px #2224;
      padding: 29px 22px 22px 22px;
      min-width: 0;
      max-width: 94vw;
      width: 325px;
      position: relative;
      color: #294;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: modalpopin .25s;
    }
    @keyframes modalpopin{
      0%{transform:scale(.91) translateY(32px);}
      70%{transform:scale(1.05) translateY(-9px);}
      100%{transform:scale(1) translateY(0);}
    }
    .modal-title{
      font-size:1.11rem;
      font-weight:700;
      color: #1276be;
      margin-bottom: 12px;
      text-align:center;
    }
    .modal-content {
      font-size:1.01em;
      color:#19797a;
      text-align:center;
      margin-bottom: 14px;
    }
    .modal-close-btn{
      background:none;
      border:none;
      color:#b53c3c;
      font-size:1.15em;
      position:absolute;
      top:12px;
      right:17px;
      font-weight:700;
      cursor:pointer;
      transition: color .17s;
      padding: 3px 7px;
      border-radius:12px;
    }
    .modal-close-btn:hover,.modal-close-btn:focus{color:#fff;background:#c02929;}
    .modal-footer {
      width:100%;
      text-align:center;
      margin-top:6px;
    }
    .modal-check-btn, .modal-count-btn {
      background: #007bff;
      color: white;
      font-size: 1.08em;
      font-weight: 700;
      padding: 8px 26px 9px 26px;
      border: none;
      border-radius: 40px;
      cursor: pointer;
      margin: 7px 5px 3px 5px;
      transition: background .15s;
      outline:none;
      display:inline-block;
    }
    .modal-check-btn.done {
      background: #1976d2;
    }
    .modal-count-btn {
      background: #1976d2;
      min-width:38px;
      border-radius:34px;
      padding: 7px 14px 8px 14px;
      margin: 0 5px;
      font-size:1.17em;
    }
    .modal-table {
      width: 100%;
      text-align: center;
      margin: 7px 0;
    }
    .modal-table td {
      font-size: 1.23em;
      color: #227ae1;
      padding: 7px 0;
    }
    .modal-small {
      font-size:0.99em;
      color:#8ba0a6;
      margin:4px 0;
    }
    .modal-reset-btn {
      background: none;
      border: none;
      color: #1976d2;
      font-size: 1em;
      text-decoration: underline;
      padding: 0 14px;
      cursor: pointer;
      transition: color .15s;
    }
    .modal-reset-btn:hover, .modal-reset-btn:focus {
      color: #1a237e;
    }
    @media (max-width: 400px) {
      .modal-window {width:98vw;}
    }
    .scroll-button {
      position: fixed;
      bottom: var(--ufns-corner);
      right: var(--ufns-corner);
      width: var(--ufns-btn-size);
      height: var(--ufns-btn-size);
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.12);
      transition: background 0.19s, box-shadow 0.18s;
      z-index: 2000;
      padding: 0;
      user-select: none;
      outline: none;
    }
    .scroll-button:hover, .scroll-button:focus {
      background: #095fd0;
      box-shadow: 0 3px 16px rgba(0, 123, 255, 0.18);
    }
    .scroll-arrow {
      display: inline-block;
      vertical-align: middle;
      width: 23px;
      height: 23px;
      transition: transform .27s cubic-bezier(.46,.03,.52,.96);
    }
    .scroll-arrow.up {
      transform: rotate(180deg);
    }
    @media (max-width: 600px){
      .scroll-button {
        right: var(--ufns-corner-mobile);
        bottom: var(--ufns-corner-mobile);
        width: var(--ufns-btn-size);
        height: var(--ufns-btn-size);
      }
    }
  </style>
</head>
<body>
<header>
  <div class="menu-icon" id="menu-icon" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" role="button" tabindex="0">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </div>
  <div class="title-container">
    <div class="title">–ó–¥–æ—Ä–æ–≤—å–µ</div>
  </div>
</header>
<div class="sidebar" id="sidebar" aria-hidden="true" role="navigation">
  <button onclick="window.location.href='index.html'">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</button>
  <button onclick="window.location.href='account.html'">–ê–∫–∫–∞—É–Ω—Ç</button>
  <button onclick="window.location.href='calendar.html'">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
  <button onclick="window.location.href='test.html'">–¢–µ—Å—Ç</button>
  <button onclick="window.location.href='honor_board.html'">–î–æ—Å–∫–∞ –ø–æ—á—ë—Ç–∞</button>
  <button onclick="window.location.href='psychologist.html'">–ü—Å–∏—Ö–æ–ª–æ–≥</button>
  <button onclick="window.location.href='documents.html'">–î–æ–∫—É–º–µ–Ω—Ç—ã</button>
  <button onclick="window.location.href='vacation.html'">–û—Ç–ø—É—Å–∫</button>
  <button onclick="window.location.href='lost_and_found.html'">–ü–æ—Ç–µ—Ä—è—à–∫–∏</button>
  <button onclick="window.location.href='health.html'" class="active">–ó–¥–æ—Ä–æ–≤—å–µ</button>
  <button onclick="window.location.href='offers.html'">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</button>
</div>
<div id="page-wrapper" tabindex="-1">
  <div class="health-block">
    <div class="health-title">–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ ‚Äî –≤–∞—à–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å!</div>
    <ul class="tips-list" id="tipsList">
      <li class="tip-card" data-tip="breaks">
        <div class="tip-head">–î–µ–ª–∞–π—Ç–µ –Ω–µ–±–æ–ª—å—à–∏–µ –ø–µ—Ä–µ—Ä—ã–≤—ã</div>
        –ö–∞–∂–¥—ã–π —á–∞—Å —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –≤—Å—Ç–∞—Ç—å –∏ –Ω–µ–º–Ω–æ–≥–æ —Ä–∞–∑–º—è—Ç—å—Å—è. –î–∞–∂–µ –∫–æ—Ä–æ—Ç–∫–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –∫–æ—Ä–∏–¥–æ—Ä—É –ø–æ–º–æ–∂–µ—Ç —Å–Ω—è—Ç—å —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ.
        <button class="btn-trigger" onclick="showTipModal('breaks')">‚Ñπ</button>
        <span class="mini-indicator" id="mini-breaks" style="display:none;"></span>
      </li>
      <li class="tip-card" data-tip="eyes">
        <div class="tip-head">–ì–∏–º–Ω–∞—Å—Ç–∏–∫–∞ –¥–ª—è –≥–ª–∞–∑</div>
        –ß–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–µ 40 –º–∏–Ω—É—Ç –ø–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –≤–∑–≥–ª—è–¥ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç (–Ω–µ –º–µ–Ω–µ–µ 20 —Å–µ–∫—É–Ω–¥), –¥–µ–ª–∞–π—Ç–µ –∫—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –≥–ª–∞–∑–∞–º–∏.
        <button class="btn-trigger" onclick="showTipModal('eyes')">‚Ñπ</button>
        <span class="mini-indicator done" id="mini-eyes" style="display:none;"></span>
      </li>
      <li class="tip-card" data-tip="posture">
        <div class="tip-head">–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Å–∞–Ω–∫–∞</div>
        –°–ª–µ–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å–ø–∏–Ω–∞ –∏ –ø–æ—è—Å–Ω–∏—Ü–∞ –±—ã–ª–∏ –ø—Ä—è–º—ã–º–∏, –∞ –∫–æ–ª–µ–Ω–∏ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –ø–æ–¥ –ø—Ä—è–º—ã–º —É–≥–ª–æ–º.
        <button class="btn-trigger" onclick="showTipModal('posture')">‚Ñπ</button>
        <span class="mini-indicator posture" id="mini-posture" style="display:none;"></span>
      </li>
      <li class="tip-card" data-tip="water">
        <div class="tip-head">–ü–µ–π—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–æ–¥—ã</div>
        –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø–∏—Ç—å —á–∏—Å—Ç—É—é –≤–æ–¥—É –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è, –∏—Å–ø–æ–ª—å–∑—É—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –±—É—Ç—ã–ª–∫—É.
        <button class="btn-trigger" onclick="showTipModal('water')">‚Ñπ</button>
        <span class="mini-indicator health" id="mini-water" style="display:none;"></span>
      </li>
      <li class="tip-card" data-tip="food">
        <div class="tip-head">–£–º–µ—Ä–µ–Ω–Ω–æ –ø–∏—Ç–∞–π—Ç–µ—Å—å</div>
        –ü–µ—Ä–µ–∫—É—Å—ã–≤–∞–π—Ç–µ —Ñ—Ä—É–∫—Ç–∞–º–∏, –æ—Ä–µ—Ö–∞–º–∏, –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º –æ–±–µ–¥–µ.
        <button class="btn-trigger" onclick="showTipModal('food')">‚Ñπ</button>
        <span class="mini-indicator eaten" id="mini-food" style="display:none;"></span>
      </li>
      <li class="tip-card" data-tip="checkup">
        <div class="tip-head">–ü–æ—Å–µ—â–∞–π—Ç–µ –ø—Ä–æ—Ñ–æ—Å–º–æ—Ç—Ä—ã</div>
        –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –¥–∏—Å–ø–∞–Ω—Å–µ—Ä–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –æ—Ç–¥–µ–ª–∞ –∫–∞–¥—Ä–æ–≤ –∏–ª–∏ –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç –£–§–ù–°.
        <button class="btn-trigger" onclick="showTipModal('checkup')">‚Ñπ</button>
        <span class="mini-indicator checkup" id="mini-checkup" style="display:none;"></span>
      </li>
    </ul>
    <div class="my-reminders-title">–ú–æ–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–¥–æ—Ä–æ–≤—å–µ</div>
    <form class="reminder-form" id="reminderForm" autocomplete="off">
      <input type="text" id="reminderText" placeholder="–î–æ–±–∞–≤—å—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '—Ä–∞–∑–º—è—Ç—å—Å—è')" maxlength="60" required>
      <button type="submit" class="reminder-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
    <ul class="reminders-list" id="remindersList"></ul>
  </div>
</div>
<button class="scroll-button" id="scroll-button" title="–ù–∞–≤–µ—Ä—Ö/–≤–Ω–∏–∑">
  <span id="scroll-arrow" class="scroll-arrow">
    <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="white" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 10 12 16 18 10"/>
    </svg>
  </span>
</button>
<div id="modalZone"></div>
<script>
  // --- –ï–ñ–ï–î–ù–ï–í–ù–´–ô –°–ë–†–û–° –°–¢–ê–¢–£–°–û–í ---
  function getTodayStr() {
    return (new Date()).toISOString().slice(0,10);
  }
  function loadTipState() {
    const today = getTodayStr();
    let tipState = {};
    let tipsDate = localStorage.getItem('tipsState_UFNS_date') || "";
    if (tipsDate !== today) {
      localStorage.setItem('tipsState_UFNS', '{}');
      localStorage.setItem('tipsState_UFNS_date', today);
      tipState = {};
    } else {
      try {
        tipState = JSON.parse(localStorage.getItem('tipsState_UFNS') || '{}');
      } catch(e) {
        tipState = {};
      }
    }
    return tipState;
  }
  let tipState = loadTipState();

  // ------ –ú–ï–ù–Æ ------
  function getScrollbarWidth() {
    const div = document.createElement('div');
    div.style.visibility = 'hidden';
    div.style.overflow = 'scroll';
    div.style.position = 'absolute';
    div.style.top = '-9999px';
    div.style.width = '100px';
    div.style.height = '100px';
    document.body.appendChild(div);
    const scrollbarWidth = div.offsetWidth - div.clientWidth;
    document.body.removeChild(div);
    return scrollbarWidth;
  }
  const menuIcon = document.getElementById('menu-icon');
  const sidebar = document.getElementById('sidebar');
  const pageWrapper = document.getElementById('page-wrapper');
  let scrollPos = 0;
  function isMobile() { return window.innerWidth <= 700;}
  function openMenu() {
    scrollPos = window.pageYOffset || document.documentElement.scrollTop;
    sidebar.classList.add('open');
    sidebar.setAttribute('aria-hidden', 'false');
    const sbw = getScrollbarWidth();
    if (isMobile()) {
      pageWrapper.style.position = 'fixed';
      pageWrapper.style.top = `-${scrollPos}px`;
      pageWrapper.style.left = '0'; pageWrapper.style.right = '0';
      document.body.style.overflow = 'hidden';
      document.body.style.paddingRight = sbw + 'px';
    } else {
      document.body.style.overflow = 'hidden';
      document.body.style.paddingRight = sbw + 'px';
    }
  }
  function closeMenu() {
    sidebar.classList.remove('open');
    sidebar.setAttribute('aria-hidden', 'true');
    if (isMobile()) {
      pageWrapper.style.position = '';
      pageWrapper.style.top = '';
      pageWrapper.style.left = '';
      pageWrapper.style.right = '';
      document.body.style.overflow = '';
      document.body.style.paddingRight = '';
      window.scrollTo(0, scrollPos);
    } else {
      document.body.style.overflow = '';
      document.body.style.paddingRight = '';
    }
  }
  menuIcon.addEventListener('click', () => {
    if (sidebar.classList.contains('open')) closeMenu(); else openMenu();
  });
  document.addEventListener('click', e => {
    if (
      sidebar.classList.contains('open') &&
      !sidebar.contains(e.target) &&
      !menuIcon.contains(e.target)
    ) closeMenu();
  });

  // ------ "–í–≤–µ—Ä—Ö/–≤–Ω–∏–∑" ------
  const scrollButton = document.getElementById('scroll-button');
  const scrollArrow = document.getElementById('scroll-arrow');
  function isAtTop() {
    return (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0) < 10;
  }
  function updateArrow() {
    const arrow = document.getElementById('scroll-arrow');
    if (isAtTop()) {
      arrow.classList.remove('up');
      scrollButton.title = "–í–Ω–∏–∑";
    } else {
      arrow.classList.add('up');
      scrollButton.title = "–í–≤–µ—Ä—Ö";
    }
  }
  scrollButton.addEventListener('click', () => {
    if (isAtTop()) {
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    } else {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  });
  window.addEventListener('scroll', updateArrow);
  updateArrow();

  // ------ –õ–û–ì–ò–ö–ê –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô ------
  const remindersList = document.getElementById('remindersList');
  let reminders = [];
  function saveReminders() {
    localStorage.setItem('healthReminders_UFNS', JSON.stringify(reminders));
  }
  function loadReminders() {
    try {
      reminders = JSON.parse(localStorage.getItem('healthReminders_UFNS') || '[]');
    } catch(e) { reminders = []; }
  }
  function renderReminders() {
    remindersList.innerHTML = '';
    reminders.forEach((item, idx) => {
      let li = document.createElement('li');
      li.className = 'reminder-item';
      li.innerHTML = `
        <span>${item}</span>
        <button class="reminder-remove-btn" title="–£–¥–∞–ª–∏—Ç—å" onclick="removeReminder(${idx})">–£–¥–∞–ª–∏—Ç—å</button>
      `;
      remindersList.appendChild(li);
    });
  }
  document.getElementById('reminderForm').addEventListener('submit', function(e) {
    e.preventDefault();
    let text = document.getElementById('reminderText').value.trim();
    if (!text) return;
    reminders.unshift(text);
    saveReminders();
    renderReminders();
    document.getElementById('reminderText').value = '';
  });
  window.removeReminder = function(idx) {
    reminders.splice(idx,1);
    saveReminders();
    renderReminders();
  };
  loadReminders();
  renderReminders();

  // ----------- –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –°–û–í–ï–¢–´ -----------
  function updateMiniIndicators() {
    let el = document.getElementById('mini-breaks');
    if(tipState.breaks) { el.textContent = "‚úî –í—ã–ø–æ–ª–Ω–µ–Ω–æ!"; el.className = "mini-indicator"; el.style.display = ""; } else { el.style.display = "none";}
    el = document.getElementById('mini-eyes');
    if(tipState.eyes) { el.textContent = "‚úî –°–¥–µ–ª–∞–Ω–æ!"; el.className = "mini-indicator done"; el.style.display = ""; } else { el.style.display = "none";}
    el = document.getElementById('mini-posture');
    if(tipState.posture) { el.textContent = "‚úî –ö–æ–Ω—Ç—Ä–æ–ª—å!"; el.className = "mini-indicator posture"; el.style.display = ""; } else { el.style.display = "none";}
    el = document.getElementById('mini-water');
    if(+tipState.water > 0) { el.textContent =  tipState.water+" —Å—Ç–∞–∫."; el.className = "mini-indicator health"; el.style.display = ""; }
      else { el.style.display = "none";}
    el = document.getElementById('mini-food');
    if(tipState.food) { el.textContent = "üçè –ü–µ—Ä–µ–∫—É—Å!"; el.className = "mini-indicator eaten"; el.style.display = ""; } else { el.style.display = "none";}
    el = document.getElementById('mini-checkup');
    if(tipState.checkup) { el.textContent = "‚úî –ó–∞–ø–∏—Å–∞–Ω(–∞)"; el.className = "mini-indicator checkup"; el.style.display = ""; } else { el.style.display = "none";}
  }
  function setTipsData() {
    localStorage.setItem('tipsState_UFNS', JSON.stringify(tipState));
    localStorage.setItem('tipsState_UFNS_date', getTodayStr());
    updateMiniIndicators();
  }
  updateMiniIndicators();

  function showTipModal(type) {
    let content = "", title = "", footer = "";
    let val = tipState[type];
    if(type==="breaks"){
      title = "–ü–µ—Ä–µ—Ä—ã–≤ –Ω–∞ —Ä–∞–∑–º–∏–Ω–∫—É";
      content = `–°–¥–µ–ª–∞–π—Ç–µ –ø–∞—Ä—É –¥–≤–∏–∂–µ–Ω–∏–π, —É–º–æ–π—Ç–µ—Å—å, –≤—Å—Ç—Ä—è—Ö–Ω–∏—Ç–µ —Ä—É–∫–∏ –∏ –ø–ª–µ—á–∏!<br><br><b>–í—ã —Å–¥–µ–ª–∞–ª–∏ –ø–µ—Ä–µ—Ä—ã–≤?</b>`;
      footer = `<button class="modal-check-btn${val?' done':''}" onclick="modalDone('breaks',this)">${val?'–í—ã–ø–æ–ª–Ω–µ–Ω–æ':'–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'}</button>`;
    }
    if(type==="eyes"){
      title = "–ì–∏–º–Ω–∞—Å—Ç–∏–∫–∞ –¥–ª—è –≥–ª–∞–∑";
      content = `–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–¥–∞–ª—å, –ø–æ–¥–Ω–∏–º–∏—Ç–µ/–æ–ø—É—Å—Ç–∏—Ç–µ/–ø–æ–≤–µ—Ä—Ç–∏—Ç–µ –≥–ª–∞–∑–∞–º–∏.<br><br><b>–ì–∏–º–Ω–∞—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞?</b>`;
      footer = `<button class="modal-check-btn${val?' done':''}" onclick="modalDone('eyes',this)">${val?'–í—ã–ø–æ–ª–Ω–µ–Ω–æ':'–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'}</button>`;
    }
    if(type==="posture"){
      title = "–ö–æ–Ω—Ç—Ä–æ–ª—å –æ—Å–∞–Ω–∫–∏";
      content = `–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–ø–∏–Ω–∞ –ø—Ä—è–º–∞—è, –ø–ª–µ—á–∏ –Ω–µ –∑–∞–∂–∞—Ç—ã, –Ω–æ–≥–∏ –ø–æ–¥ –ø—Ä—è–º—ã–º —É–≥–ª–æ–º.<br><br><b>–û—Å–∞–Ω–∫–∞ –≤ –ø–æ—Ä—è–¥–∫–µ?</b>`;
      footer = `<button class="modal-check-btn${val?' done':''}" onclick="modalDone('posture',this)">${val?'–ö–æ–Ω—Ç—Ä–æ–ª—å!':'–î–∞, —Å–∏–∂—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ'}</button>`;
    }
    if(type==="water"){
      title = "–°—Ç–∞–∫–∞–Ω—ã –≤–æ–¥—ã";
      let n = parseInt(val)||0;
      content = `<div>–°–∫–æ–ª—å–∫–æ —Å—Ç–∞–∫–∞–Ω–æ–≤ –≤–æ–¥—ã –≤—ã –≤—ã–ø–∏–ª–∏ —Å–µ–≥–æ–¥–Ω—è?</div>
          <div class="modal-table">
            <button class="modal-count-btn" onclick="modalStepWater(-1);return false;">-</button>
            <span style="font-size:2em;width:44px;display:inline-block;text-align:center;" id="waterCounter">${n}</span>
            <button class="modal-count-btn" onclick="modalStepWater(+1);return false;">+</button>
          </div>
          <div class="modal-small">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 5-8 —Å—Ç–∞–∫–∞–Ω–æ–≤ –≤ –¥–µ–Ω—å</div>
          <button class="modal-reset-btn" onclick="resetWater();return false;">–°–±—Ä–æ—Å–∏—Ç—å —Å—á—ë—Ç—á–∏–∫</button>`;
      footer = ``;
    }
    if(type==="food"){
      title = "–ü–∏—Ç–∞–Ω–∏–µ";
      content = "–ù–µ –∑–∞–±—ã–ª–∏ –ø–µ—Ä–µ–∫—É—Å–∏—Ç—å –∏–ª–∏ –ø–æ–æ–±–µ–¥–∞—Ç—å?<br><br><b>–ü–µ—Ä–µ–∫—É—Å/–û–±–µ–¥ –±—ã–ª?</b>";
      footer = `<button class="modal-check-btn${val?' done':''}" onclick="modalDone('food',this)">${val?'–ü–µ—Ä–µ–∫—É—Å –±—ã–ª':'–û—Ç–º–µ—Ç–∏—Ç—å'}</button>`;
    }
    if(type==="checkup"){
      title = "–ü—Ä–æ—Ñ–æ—Å–º–æ—Ç—Ä/–î–∏—Å–ø–∞–Ω—Å–µ—Ä–∏–∑–∞—Ü–∏—è";
      content = "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∏ –ø–æ—Å–µ—Ç–∏—Ç–µ –ø—Ä–æ—Ñ–æ—Å–º–æ—Ç—Ä!<br><br><b>–í—ã –∑–∞–ø–∏—Å–∞–ª–∏—Å—å/–ø—Ä–æ—à–ª–∏?</b>";
      footer = `<button class="modal-check-btn${val?' done':''}" onclick="modalDone('checkup',this)">${val?'‚úî –ó–∞–ø–∏—Å–∞–Ω(–∞)':'–û—Ç–º–µ—Ç–∏—Ç—å'}</button>`;
    }
    showModal(title,content,footer,type);
  }
  function showModal(title,content,footer,tipType){
    let modal = document.createElement("div");
    modal.className = "modal-mask";
    modal.tabIndex = 0;
    modal.innerHTML = `
      <div class="modal-window" role="dialog">
        <button class="modal-close-btn" onclick="closeModal()">&times;</button>
        <div class="modal-title">${title}</div>
        <div class="modal-content" id="modalContent">${content}</div>
        <div class="modal-footer">${footer||""}</div>
      </div>
    `;
    document.body.appendChild(modal);
    modal.focus();
    modal.addEventListener('wheel',e=>e.stopPropagation(),{passive:false});
    window._curTip = tipType;
    setTimeout(()=>{
      document.querySelector(".modal-window").focus();
    },200);
  }
  window.closeModal = function() {
    let m = document.querySelector('.modal-mask');
    if(m) m.parentNode.removeChild(m);
  }
  window.modalDone = function(type,btn){
    tipState = loadTipState(); // <= –Ω–∞ –∫–∞–∂–¥—ã–π –∫–ª–∏–∫ –ø–µ—Ä–µ–∫–æ–Ω—Å–µ—Ä–≤–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
    if(tipState[type]) {
      tipState[type]=0;
      btn.textContent = (type==="posture"?"–î–∞, —Å–∏–∂—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ":(type==="food"?"–û—Ç–º–µ—Ç–∏—Ç—å":(type==="checkup"?"–û—Ç–º–µ—Ç–∏—Ç—å":"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ")));
      btn.classList.remove('done');
    } else {
      tipState[type]=1;
      btn.textContent = (type==="posture"?"–ö–æ–Ω—Ç—Ä–æ–ª—å!":(type==="food"?"–ü–µ—Ä–µ–∫—É—Å –±—ã–ª":(type==="checkup"?"‚úî –ó–∞–ø–∏—Å–∞–Ω(–∞)":"–í—ã–ø–æ–ª–Ω–µ–Ω–æ")));
      btn.classList.add('done');
    }
    setTipsData();
  }
  window.modalStepWater = function(st){
    tipState = loadTipState();
    let n = parseInt(tipState.water)||0;
    n = Math.max(0,Math.min(16,n+st));
    tipState.water=n;
    document.getElementById('waterCounter').textContent = n;
    setTipsData();
  }
  window.resetWater = function(){
    tipState = loadTipState();
    tipState.water = 0;
    document.getElementById('waterCounter').textContent = "0";
    setTipsData();
  }
  updateMiniIndicators();

  window.addEventListener('keydown',function(e){
    if(e.key==="Escape") closeModal();
  });

  // –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É: –µ—Å–ª–∏ –¥–∞—Ç–∞ —Å–º–µ–Ω–∏–ª–∞—Å—å ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
  window.addEventListener('focus', function() {
    let newTips = loadTipState();
    let changed = false;
    for(const key in tipState)
      if (tipState[key] !== newTips[key]) { changed = true; break; }
    if (changed) {
      tipState = newTips;
      updateMiniIndicators();
    }
  });
</script>
</body>
</html>